{"map":"{\"version\":3,\"sources\":[\"cloudfront-helper.js\"],\"names\":[\"e\",\"a\",\"i\",\"exports\",\"modules\",\"installedModules\",\"__webpack_require__\",\"moduleId\",\"module\",\"l\",\"call\",\"m\",\"c\",\"d\",\"name\",\"getter\",\"o\",\"Object\",\"defineProperty\",\"enumerable\",\"get\",\"r\",\"Symbol\",\"toStringTag\",\"value\",\"t\",\"mode\",\"__esModule\",\"ns\",\"create\",\"key\",\"bind\",\"n\",\"object\",\"property\",\"prototype\",\"hasOwnProperty\",\"p\",\"s\",\"15\",\"require\",\"3\",\"71\",\"console\",\"log\",\"https\",\"url\",\"AWS\",\"s3\",\"S3\",\"idp\",\"CognitoIdentityServiceProvider\",\"utf8\",\"handler\",\"event\",\"context\",\"callback\",\"responseStatus\",\"responseData\",\"RequestType\",\"ResourceProperties\",\"customAction\",\"customizeUserPool\",\"err\",\"data\",\"Error\",\"join\",\"sendResponse\",\"logStreamName\",\"cleanUpS3Bucket\",\"responseBody\",\"JSON\",\"stringify\",\"Status\",\"Reason\",\"PhysicalResourceId\",\"StackId\",\"RequestId\",\"LogicalResourceId\",\"Data\",\"parsedUrl\",\"parse\",\"ResponseURL\",\"options\",\"hostname\",\"port\",\"path\",\"method\",\"headers\",\"Content-Type\",\"Content-Length\",\"length\",\"req\",\"request\",\"res\",\"on\",\"write\",\"end\",\"properties\",\"params\",\"Bucket\",\"DestBucket\",\"getBucketVersioning\",\"checkIfVersioned\",\"deleteVersionedObjects\",\"deleteNonVersionedObjects\",\"destBucket\",\"listObjectVersions\",\"objects\",\"versionItems\",\"Versions\",\"push\",\"Key\",\"VersionId\",\"deleteMarkerItems\",\"DeleteMarkers\",\"deleteParams\",\"Delete\",\"Objects\",\"deleteObjects\",\"deleteData\",\"listObjects\",\"items\",\"Contents\",\"bucket\",\"setUICustomization\",\"UserPoolId\",\"ClientId\",\"CSS\",\"ImageFile\",\"Buffer\",\"from\",\"encode\",\"72\",\"8\"],\"mappings\":\"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\"}","code":"!function(e,t){for(var o in t)e[o]=t[o]}(exports,function(e){var t={};function o(n){if(t[n])return t[n].exports;var r=t[n]={i:n,l:!1,exports:{}};return e[n].call(r.exports,r,r.exports,o),r.l=!0,r.exports}return o.m=e,o.c=t,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(e,\"__esModule\",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&\"object\"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,\"default\",{enumerable:!0,value:e}),2&t&&\"string\"!=typeof e)for(var r in e)o.d(n,r,function(t){return e[t]}.bind(null,r));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,\"a\",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p=\"\",o(o.s=71)}({15:function(e,t){e.exports=require(\"url\")},3:function(e,t){e.exports=require(\"aws-sdk\")},71:function(e,t,o){\"use strict\";console.log(\"Loading function\");const n=o(8),r=o(15);let s=o(3),u=new s.S3,c=new s.CognitoIdentityServiceProvider;const i=o(72);t.handler=(e,t,o)=>{let n=\"FAILED\",r={};\"Create\"===e.RequestType?\"customizeUserPool\"===e.ResourceProperties.customAction?g(e.ResourceProperties,(function(s,u){s?(r={Error:\"Customize user pool function failed\"},console.log([r.Error,\":\\n\",s].join(\"\"))):(n=\"SUCCESS\",r={}),l(e,o,t.logStreamName,n,r)})):\"cleanUpS3Bucket\"===e.ResourceProperties.customAction&&(n=\"SUCCESS\",r={},l(e,o,t.logStreamName,n,r)):\"Delete\"===e.RequestType?(\"cleanUpS3Bucket\"===e.ResourceProperties.customAction&&a(e.ResourceProperties,(function(s,u){s?(r={Error:\"Clean up S3 bucket function failed\"},console.log([r.Error,\":\\n\",s].join(\"\"))):(n=\"SUCCESS\",r={}),l(e,o,t.logStreamName,n,r)})),n=\"SUCCESS\",l(e,o,t.logStreamName,n,r)):\"customizeUserPool\"===e.ResourceProperties.customAction&&(n=\"SUCCESS\",r={},l(e,o,t.logStreamName,n,r))};let l=function(e,t,o,s,u){const c=JSON.stringify({Status:s,Reason:\"See the details in CloudWatch Log Stream: \"+o,PhysicalResourceId:o,StackId:e.StackId,RequestId:e.RequestId,LogicalResourceId:e.LogicalResourceId,Data:u}),i=r.parse(e.ResponseURL),l={hostname:i.hostname,port:443,path:i.path,method:\"PUT\",headers:{\"Content-Type\":\"\",\"Content-Length\":c.length}},a=n.request(l,e=>{t(null,\"Successfully sent stack response!\")});a.on(\"error\",e=>{console.log(\"sendResponse Error:\\n\",e),t(e)}),a.write(c),a.end()},a=function(e,t){var o={Bucket:e.DestBucket};u.getBucketVersioning(o,(function(o,n){return o?(console.log(\"Error getting the bucket version: \"+o),t(o,null)):(n.Status?(console.log(\"This is a versioned Bucket\"),f(e.DestBucket,t)):(console.log(\"This is not a versioned bucket\"),d(e.DestBucket,t)),t(null,\"success\"))}))},f=function(e,t){var o={Bucket:e};u.listObjectVersions(o,(function(o,n){if(o)console.log(\"error listing bucket objects \"+o);else{for(var r=[],s=n.Versions,c=0;c<s.length;c+=1)r.push({Key:s[c].Key,VersionId:s[c].VersionId});var i=n.DeleteMarkers;for(c=0;c<i.length;c+=1)r.push({Key:i[c].Key,VersionId:i[c].VersionId});var l={Bucket:e,Delete:{Objects:r}};u.deleteObjects(l,(function(e,o){if(e)return console.log(\"error deleting objects \"+e),t(e,null);t(null,\"success\")}))}}))},d=function(e,t){var o={Bucket:e};u.listObjects(o,(function(e,o){if(e)console.log(\"error listing bucket objects \"+e);else{for(var n=o.Contents,r=[],s=0;s<n.length;s+=1)r.push({Key:n[s].Key});var c={Bucket:bucket,Objects:r};u.deleteObjects(c,(function(e,o){if(e)return console.log(\"error deleting objects \"+e),t(e,null);t(null,\"success\")}))}}))},g=function(e,t){c.setUICustomization({UserPoolId:e.UserPoolId,ClientId:e.ClientId,CSS:e.CSS,ImageFile:new Buffer.from(i.encode(e.ImageFile),\"base64\")},(function(e,o){if(e)return console.log(\"Error setting the UI customization \"+e),t(e,null);t(null,o)}))}},72:function(e,t){e.exports=require(\"utf8\")},8:function(e,t){e.exports=require(\"https\")}}));","extractedComments":[]}