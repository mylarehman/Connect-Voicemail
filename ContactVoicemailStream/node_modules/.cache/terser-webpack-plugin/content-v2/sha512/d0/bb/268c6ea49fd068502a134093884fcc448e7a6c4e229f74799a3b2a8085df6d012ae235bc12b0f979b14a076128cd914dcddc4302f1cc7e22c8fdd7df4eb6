{"map":"{\"version\":3,\"sources\":[\"agents.js\"],\"names\":[\"e\",\"a\",\"i\",\"exports\",\"modules\",\"installedModules\",\"__webpack_require__\",\"moduleId\",\"module\",\"l\",\"call\",\"m\",\"c\",\"d\",\"name\",\"getter\",\"o\",\"Object\",\"defineProperty\",\"enumerable\",\"get\",\"r\",\"Symbol\",\"toStringTag\",\"value\",\"t\",\"mode\",\"__esModule\",\"ns\",\"create\",\"key\",\"bind\",\"n\",\"object\",\"property\",\"prototype\",\"hasOwnProperty\",\"p\",\"s\",\"10\",\"__webpack_exports__\",\"UsersRepo\",\"_lib_dynamo__WEBPACK_IMPORTED_MODULE_0__\",\"_domain_agent_domain__WEBPACK_IMPORTED_MODULE_1__\",\"[object Object]\",\"this\",\"dynamo\",\"process\",\"env\",\"USERS_TABLE_NAME\",\"amazonConnectInstanceId\",\"AMAZON_CONNECT_INSTANCE_ARN\",\"extension\",\"params\",\"IndexName\",\"KeyConditionExpression\",\"ExpressionAttributeValues\",\":ext\",\"query\",\"then\",\"items\",\"length\",\"userId\",\"Key\",\"agentId\",\"getItem\",\"item\",\"next\",\"size\",\"param\",\"Limit\",\"Select\",\"ExclusiveStartKey\",\"JSON\",\"parse\",\"Buffer\",\"from\",\"toString\",\"scanWithNext\",\"scan\",\"agent\",\"data\",\"Item\",\"createAgentData\",\"put\",\"deliverSMSPhoneNumber\",\"deliverSMS\",\"deliverEmail\",\"encryptVoicemail\",\"transcribeVoicemail\",\"expressionAttrValues\",\":tv\",\":ev\",\":de\",\":do\",\"email\",\"sms\",\"enabled\",\"phoneNumber\",\"updateExpression\",\"UpdateExpression\",\"update\",\"values\",\"batchWrite\",\"12\",\"connect_agent_service_ConnectAgentService\",\"ConnectAgent\",\"connectUser\",\"standard_errors\",\"agent_domain\",\"agent_errors_ExtensionInUseError\",\"super\",\"external_awesome_phonenumber_\",\"external_awesome_phonenumber_default\",\"connectService\",\"usersRepo\",\"getAgentByExtension\",\"getConnectUser\",\"user\",\"getAgentByUserId\",\"getAgents\",\"Promise\",\"all\",\"listConnectUsers\",\"getAllAgents\",\"connectUsers\",\"dbUsers\",\"needUpdate\",\"forEach\",\"found\",\"find\",\"dbUser\",\"Id\",\"username\",\"Username\",\"push\",\"PutRequest\",\"createAgentCreateParam\",\"DeleteRequest\",\"createAgentDeleteParam\",\"_validateAgentUpdate\",\"createAgentIfNeeded\",\"updateAgentById\",\"getConnectAgentByUserId\",\"createAgentPromise\",\"createAgent\",\"resolve\",\"reject\",\"undefined\",\"phone\",\"isValid\",\"getNumber\",\"Number\",\"isNaN\",\"13\",\"connect_service_ConnectService\",\"ConnectUser\",\"userMap\",\"detail\",\"arn\",\"firstName\",\"lastName\",\"phoneType\",\"autoAccept\",\"deskPhoneNumber\",\"directoryUserId\",\"routingProfileId\",\"AWS\",\"instanceId\",\"split\",\"connect\",\"Connect\",\"maxBackOffTime\",\"users\",\"promises\",\"map\",\"InstanceId\",\"UserId\",\"describeUser\",\"err\",\"console\",\"log\",\"User\",\"_listConnectUsers\",\"list\",\"nextToken\",\"retry\",\"MaxResults\",\"listUsers\",\"promise\",\"UserSummaryList\",\"NextToken\",\"concat\",\"catch\",\"warn\",\"Math\",\"min\",\"pow\",\"setTimeout\",\"2\",\"GenericError\",\"MissingParameterError\",\"InvalidParameterError\",\"MissingParametersError\",\"Error\",\"message\",\"developerMessage\",\"parameter\",\"3\",\"require\",\"32\",\"4\",\"DynamoDBService\",\"tableName\",\"client\",\"DynamoDB\",\"DocumentClient\",\"result\",\"Items\",\"allItems\",\"LastEvaluatedKey\",\"stringify\",\"callback\",\"batch\",\"startingIndex\",\"_batchWrite\",\"index\",\"nextData\",\"endIndex\",\"batchToUpdate\",\"slice\",\"batchParam\",\"RequestItems\",\"5\",\"Agent\",\"agentMap\",\"deliveryOptions\",\"6\",\"Responder\",\"ALLOW_ORIGIN_HEADER\",\"Access-Control-Allow-Origin\",\"Access-Control-Allow-Credentials\",\"Strict-Transport-Security\",\"X-Frame-Options\",\"Response\",\"statusCode\",\"body\",\"cors\",\"customHeaders\",\"response\",\"headers\",\"error\",\"description\",\"errorMessage\",\"errorName\",\"errorStack\",\"stack\",\"70\",\"_service_connect_agent_service__WEBPACK_IMPORTED_MODULE_1__\",\"_service_connect_service__WEBPACK_IMPORTED_MODULE_2__\",\"_repo_users_repo__WEBPACK_IMPORTED_MODULE_3__\",\"_lib_responder__WEBPACK_IMPORTED_MODULE_4__\",\"agentService\",\"async\",\"event\",\"context\",\"extensionNumber\",\"Details\",\"ContactData\",\"Attributes\",\"connectAgent\",\"getConnectAgentByExtension\",\"agentName\",\"getFullName\",\"saveCallRecording\",\"transferMessage\",\"queryStringParameters\",\"getConnectAgents\",\"agents\",\"getAgentById\",\"pathParameters\",\"9\"],\"mappings\":\"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\"}","code":"!function(e,t){for(var n in t)e[n]=t[n]}(exports,function(e){var t={};function n(r){if(t[r])return t[r].exports;var s=t[r]={i:r,l:!1,exports:{}};return e[r].call(s.exports,s,s.exports,n),s.l=!0,s.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(e,\"__esModule\",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&\"object\"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,\"default\",{enumerable:!0,value:e}),2&t&&\"string\"!=typeof e)for(var s in e)n.d(r,s,function(t){return e[t]}.bind(null,s));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,\"a\",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p=\"\",n(n.s=70)}({10:function(e,t,n){\"use strict\";n.d(t,\"a\",(function(){return i}));var r=n(4),s=n(5);class i{constructor(){this.dynamo=new r.a(process.env.USERS_TABLE_NAME),this.amazonConnectInstanceId=process.env.AMAZON_CONNECT_INSTANCE_ARN}getAgentByExtension(e){let t={IndexName:\"AgentExtensionIndex\",KeyConditionExpression:\"extension = :ext\",ExpressionAttributeValues:{\":ext\":e}};return this.dynamo.query(t).then(e=>e.length>0?new s.a(e[0]):null)}getAgentByUserId(e){let t={Key:{agentId:e}};return this.dynamo.getItem(t).then(e=>e?new s.a(e):null)}getAgents(e,t){let n={Limit:t||1e3,Select:\"ALL_ATTRIBUTES\"};return e&&(n.ExclusiveStartKey=JSON.parse(Buffer.from(e,\"base64\").toString(\"utf-8\"))),this.dynamo.scanWithNext(n)}getAllAgents(){return this.dynamo.scan({Select:\"ALL_ATTRIBUTES\"})}createAgentCreateParam(e){let t={Item:{...e,agentId:e.userId}};return\"\"===e.extension&&delete t.Item.extension,t}createAgentDeleteParam(e){return{Key:{agentId:e.userId}}}createAgent(e){let t=this.createAgentData(e);return this.dynamo.put(t)}updateAgentById(e,{extension:t,deliverSMSPhoneNumber:n,deliverSMS:r,deliverEmail:s,encryptVoicemail:i,transcribeVoicemail:a}){let o={\":tv\":a||!1,\":ev\":i||!1,\":de\":s,\":do\":{email:s,sms:{enabled:r,phoneNumber:\"\"===n?\"null\":n}}};null!==t&&\"\"!==t&&(o[\":ext\"]=t);let u=\"SET transcribeVoicemail=:tv, encryptVoicemail = :ev, deliveryEmail = :de, deliveryOptions = :do\";u+=null===t||\"\"===t?\" REMOVE extension\":\", extension = :ext\";let c={Key:{agentId:e},ExpressionAttributeValues:o,UpdateExpression:u};return this.dynamo.update(c)}batchWrite(e){return this.dynamo.batchWrite(e,0)}}},12:function(e,t,n){\"use strict\";n.d(t,\"a\",(function(){return c}));class r{constructor(e,t){this.userId=e.userId,this.agent=e,this.connectUser=t}}var s=n(2),i=n(5);s.a;class a extends s.a{constructor(e){super(\"ExtensionInUseError\",\"Extension already in use. Please provide a different extension number.\",\"Cannot have more than one user assigned to the extension number: \"+e)}}var o=n(9),u=n.n(o);class c{constructor(e,t){this.usersRepo=t,this.connectService=e}getConnectAgentByExtension(e){return this.usersRepo.getAgentByExtension(e).then(e=>this.connectService.getConnectUser(e.userId).then(t=>new r(e,t)))}getConnectAgentByUserId(e){return this.connectService.getConnectUser(e).then(t=>this.usersRepo.getAgentByUserId(e).then(e=>new r(e,t)))}getConnectAgents(e,t){return this.usersRepo.getAgents(e,t)}syncConnectAgents(){return Promise.all([this.connectService.listConnectUsers(),this.usersRepo.getAllAgents()]).then(e=>{let[t,n]=e,r=[];if(t.forEach(e=>{const t=n.find(t=>t.userId===e.Id);let s;t&&t.username!==e.Username?(s={...t,username:e.Username},r.push({PutRequest:this.usersRepo.createAgentCreateParam(s)})):t||(s={userId:e.Id,username:e.Username},r.push({PutRequest:this.usersRepo.createAgentCreateParam(s)}))}),n.forEach(e=>{t.find(t=>t.Id===e.userId)||r.push({DeleteRequest:this.usersRepo.createAgentDeleteParam(e)})}),r.length>0)return this.usersRepo.batchWrite(r)})}updateAgentById(e,t){return this._validateAgentUpdate(e,t).then(()=>this.createAgentIfNeeded(e,t.extension)).then(()=>this.usersRepo.updateAgentById(e,t)).then(()=>this.getConnectAgentByUserId(e))}createAgentIfNeeded(e,t){let n=this.usersRepo.getAgentByUserId(e).then(n=>null===n?this.usersRepo.createAgent(i.a.create(e,t)):n);return t?this.usersRepo.getAgentByExtension(t).then(n=>{if(null!=n&&n.userId!==e)throw new a(t);return n}).then(()=>n):n}_validateAgentUpdate(e,t){return new Promise((n,r)=>{let{extension:i,deliverSMSPhoneNumber:a,deliverSMS:o,deliverEmail:c,encryptVoicemail:l,transcribeVoicemail:d}=t;if(e)if(!0!==o||void 0!==a&&\"\"!==a){if(a){let e=new u.a(a);e.isValid()?t.deliverSMSPhoneNumber=e.getNumber():r(new s.a(\"InvalidPhoneNumberError\",\"The phone number you've entered is invalid.  Please enter a valid phone number and try again.\",\"Phone number cannot be validated for \"+a))}t.hasOwnProperty(\"extension\")&&(t.extension.length>5||Number.isNaN(t.extension))?r(new s.b(\"Invalid extension number\",\"Extension number must be numeric and less than 5 digits.\")):t.hasOwnProperty(\"extension\")&&t.hasOwnProperty(\"deliverSMS\")&&t.hasOwnProperty(\"deliverEmail\")&&t.hasOwnProperty(\"transcribeVoicemail\")&&t.hasOwnProperty(\"encryptVoicemail\")?n({agentId:e,update:t}):r(new s.d)}else r(new s.b(\"Please provide a phone number for SMS delivery\",\"deliverSMSPhoneNumber cannot be null or empty if deliverSMS is true\"));else r(new s.c(\"agentId\"))})}}},13:function(e,t,n){\"use strict\";n.d(t,\"a\",(function(){return i}));class r{constructor(e,t=!0){this.userId=e.Id,this.arn=e.Arn,this.username=e.Username,t&&(this.firstName=e.IdentityInfo.FirstName,this.lastName=e.IdentityInfo.LastName,this.email=e.IdentityInfo.Email,e.hasOwnProperty(\"PhoneConfig\")?(this.phoneType=e.PhoneConfig.PhoneType,this.autoAccept=e.PhoneConfig.AutoAccept,this.deskPhoneNumber=e.PhoneConfig.DeskPhoneNumber):(this.phoneType=null,this.autoAccept=null,this.deskPhoneNumber=null),this.directoryUserId=e.DirectoryUserId,this.routingProfileId=e.RoutingProfileId)}getFullName(){return`${this.firstName} ${this.lastName}`}}const s=n(3);class i{constructor(){this.instanceId=process.env.AMAZON_CONNECT_INSTANCE_ARN.split(\"/\")[1],this.connect=new s.Connect,this.maxBackOffTime=45}getConnectUsers(){return this.listConnectUsers().then(e=>{let t=e.map(e=>this.getConnectUser(e.Id));return Promise.all(t)})}getConnectUser(e){return new Promise((t,n)=>{let s={InstanceId:this.instanceId,UserId:e};this.connect.describeUser(s,(e,s)=>e?(console.log(\"Error\",e),void n(e)):s?void t(new r(s.User)):(console.log(\"No user found\"),void n(e)))})}listConnectUsers(){return this._listConnectUsers([],null,0)}_listConnectUsers(e,t,n){let r={InstanceId:this.instanceId,MaxResults:1e3};return t&&(r.NextToken=t),this.connect.listUsers(r).promise().then(t=>{let{UserSummaryList:n,NextToken:r}=t,s=e.concat(n);return r?this._listConnectUsers(s,r,0):s}).catch(r=>{if(console.warn(\"list connect user failed. Retry: \"+n,r),n>5)throw r;return(s=Math.min(Math.pow(n,2),this.maxBackOffTime),new Promise(e=>setTimeout(e,s))).then(()=>this._listConnectUsers(e,t,n+1));var s})}}},2:function(e,t,n){\"use strict\";n.d(t,\"a\",(function(){return r})),n.d(t,\"c\",(function(){return s})),n.d(t,\"b\",(function(){return i})),n.d(t,\"d\",(function(){return a}));class r extends Error{constructor(e,t,n){super(),this.message=t,this.developerMessage=n,this.name=e}}class s extends r{constructor(e){super(\"MissingParameterError\",\"Missing parameter\",\"Missing parameter: \"+e)}}class i extends r{constructor(e,t){super(\"InvalidParameterValueError\",e,t)}}class a extends r{constructor(){super(\"MissingParametersError\",\"One or more parameters are missing\",\"You have one ore more parameters miss, please see documentation for more information.\")}}},3:function(e,t){e.exports=require(\"aws-sdk\")},32:function(e,t){e.exports=require(\"source-map-support/register\")},4:function(e,t,n){\"use strict\";n.d(t,\"a\",(function(){return s}));const r=n(3);class s{constructor(e){this.tableName=e,this.client=new r.DynamoDB.DocumentClient}update(e){return e.TableName=this.tableName,e.ReturnValues=\"ALL_NEW\",this.client.update(e).promise()}put(e){return e.TableName=this.tableName,this.client.put(e).promise()}query(e){return e.TableName=this.tableName,this.client.query(e).promise().then(e=>e.Items||null)}scan(e,t=[]){return e.TableName=this.tableName,this.client.scan(e).promise().then(n=>{let r=t;return n.Items&&(r=t.concat(n.Items)),n.LastEvaluatedKey?(console.log(\"Rescanning with next page\"),e.ExclusiveStartKey=n.LastEvaluatedKey,this.scan(e,r)):r})}queryWithNext(e){return e.TableName=this.tableName,this.client.query(e).promise().then(e=>{let t={data:e.Items||[]};return e.LastEvaluatedKey&&(t.next=Buffer.from(JSON.stringify(e.LastEvaluatedKey),\"utf8\").toString(\"base64\")),t})}scanWithNext(e){return e.TableName=this.tableName,this.client.scan(e).promise().then(e=>{let t={data:e.Items||[]};return e.LastEvaluatedKey&&(t.next=Buffer.from(JSON.stringify(e.LastEvaluatedKey),\"utf8\").toString(\"base64\")),t})}getItem(e,t){return e.TableName=this.tableName,this.client.get(e).promise().then(e=>e.Item||null)}batchWrite(e,t){return new Promise((n,r)=>{this._batchWrite(e,t).then(t=>{e.length>t.index?this.batchWrite(e,t.index).then(e=>{n(e)}):n(t.data)})})}_batchWrite(e,t){return new Promise((n,r)=>{let s=e.length>t+24?t+24:e.length,i=e.slice(t,s),a={RequestItems:{[this.tableName]:i}};this.client.batchWrite(a,(e,r)=>{e&&console.log(\"Any error? \"+JSON.stringify(e,null,2)),n({index:t+24,data:r})})})}}},5:function(e,t,n){\"use strict\";n.d(t,\"a\",(function(){return r}));class r{constructor(e){this.userId=e.userId,this.extension=e.extension,this.username=e.username,this.transcribeVoicemail=e.transcribeVoicemail||!1,this.encryptVoicemail=e.encryptVoicemail||!1,this.deliveryOptions=e.deliveryOptions||{sms:{enabled:!1,phoneNumber:null},email:!1}}static create(e,t=null){return new r({userId:e,extension:t,deliveryOptions:{sms:{enabled:!1,phoneNumber:null},email:!1}})}}},6:function(e,t,n){\"use strict\";n.d(t,\"a\",(function(){return s}));const r={\"Access-Control-Allow-Origin\":\"*\",\"Access-Control-Allow-Credentials\":!0,\"Strict-Transport-Security\":\"max-age=31536000; includeSubDomains\",\"X-Frame-Options\":\"DENY\"};const s={Response:function(e,t={},n=!1,s=null){let i={statusCode:e,body:JSON.stringify(t)};if(n&&(i.headers=r),s){let e=i.headers;e={...e,...s},i.headers=e}return i},Error:function e(t,n,s,i=!1){console.log(n,n instanceof e,n.toString());let a=\"\",o=\"Error\",u=\"\",c=\"\";n.hasOwnProperty(\"message\")&&(a=n.message),n.hasOwnProperty(\"name\")&&(o=n.name),n.hasOwnProperty(\"stack\")&&(u=n.stack),n.hasOwnProperty(\"developerMessage\")&&(c=n.developerMessage);let l={statusCode:t,body:JSON.stringify({errorMessage:s})};return i&&(l.headers=r),console.log(\"Error:\",l),l}}},70:function(e,t,n){\"use strict\";n.r(t);n(32);var r=n(12),s=n(13),i=n(10),a=n(6);const o=new r.a(new s.a,new i.a);exports.getAgentByExtension=async(e,t)=>{const n=e.Details.ContactData.Attributes.extensionNumber,r=await o.getConnectAgentByExtension(n);try{return{agentId:r.userId,agentName:r.connectUser.getFullName(),transcribeVoicemail:r.agent.transcribeVoicemail?\"true\":\"false\",encryptVoicemail:r.agent.encryptVoicemail?\"true\":\"false\",saveCallRecording:\"true\",transferMessage:\"Please wait while we transfer you to \"+r.connectUser.getFullName()}}catch(e){console.log(\"Error getting the agent by extension. Error: \",JSON.stringify(e,null,2))}},exports.getAgents=async(e,t)=>{const n=e.queryStringParameters||{};return o.getConnectAgents(n.next,n.size).then(e=>a.a.Response(200,e,!0)).catch(e=>a.a.Error(400,e,\"Unable to retrieve agent list\",!0))},exports.getAgentById=async(e,t)=>{let{agentId:n}=e.pathParameters;return o.getConnectAgentByUserId(n).then(e=>a.a.Response(200,e,!0)).catch(e=>a.a.Error(400,e,\"Unable get agent\",!0))},exports.updateAgentById=async(e,t)=>{let{agentId:n}=e.pathParameters,r=JSON.parse(e.body);return o.updateAgentById(n,r).then(e=>a.a.Response(200,{agent:e},!0)).catch(e=>a.a.Error(400,e,\"Unable update agent\",!0))}},9:function(e,t){e.exports=require(\"awesome-phonenumber\")}}));","extractedComments":[]}